window.onload=function(){function e(){var e=document.getElementById("headers-list");e.removeChild(this.parentNode)}function t(){for(var e,t=document.getElementById("headers-list"),n=this.previousElementSibling.previousElementSibling.value,d=0;d<p.options.length;d++)p.options[d].value===n&&(e=d);p.options[e].removeAttribute("disabled"),t.removeChild(this.parentNode)}function n(){}function d(){var e,t=new Array;for(e=0;e<c.length;e++)t[e]=c[e].name;var n=prompt("Please enter a unique name for your chosen values:");if(null!=n){if(-1!=t.indexOf(n))return void alert("Name is not unique!");if(""==n)return void alert("Name cannot be an empty string!");if(!n.match(/^[0-9a-zA-Z\s]+$/))return void alert("Name is not alphanumeric!");var d,l,i,o=new Array,u=document.getElementById("headers-list");for(i=0;i<u.children.length;i++)d=u.children[i].children[0].value.replace(/^\s+|\s+$/g,""),l=u.children[i].children[1].value,o.push({key:d,value:l});var s={name:n,type:null!=document.getElementById("reqType")?document.getElementById("reqType").value:null,url:null!=document.getElementById("url")?document.getElementById("url").value:null,headerList:o,body:null!=document.getElementById("body")?document.getElementById("body").value:null},m=document.getElementById("need-children");for(c.push(s);m.hasChildNodes();)m.removeChild(m.firstChild);var p;for(p=0;p<c.length;p++){var h=document.createElement("div"),v=document.createElement("span"),y=document.createTextNode("X"),g=document.createElement("div"),E=document.createTextNode(c[p].name),f=document.createElement("span"),b=document.createTextNode(c[p].url);h.className="pure-u-1 saved-list-item",v.className="pure-u-1-10 delete",g.className="pure-u-22-24 label",f.className="pure-u-1 site",v.appendChild(y),g.appendChild(E),f.appendChild(b),h.appendChild(v),h.appendChild(g),h.appendChild(f),null!=m&&m.appendChild(h),g.addEventListener("click",r),v.addEventListener("click",a)}localStorage.removeItem("savedList"),localStorage.setItem("savedList",JSON.stringify(c))}}function r(){if(confirm("Are you sure you want to auto-fill the form using this entry?")){var t,n=this.innerHTML;for(t=0;t<c.length;t++)if(c[t].name==n){document.getElementById("reqType").value=c[t].type,"GET"!=document.getElementById("reqType").value&&document.getElementById("body").removeAttribute("disabled"),document.getElementById("url").value=c[t].url,document.getElementById("body").value=c[t].body;var d,r=document.getElementById("headers-list");for(d=0;d<r.children.length;d++)r.removeChild(r.firstChild);for(d=0;d<c[t].headerList.length;d++){var a=document.createElement("li"),l=document.createElement("input"),i=document.createElement("input"),o=document.createElement("button"),u=document.createTextNode("X");o.addEventListener("click",e),a.className="pure-u-1 headers-list-item",l.className="pure-u-3-8",i.className="pure-u-3-8",o.className="pure-button button-error pure-u-1-8 remove-header",o.appendChild(u),l.value=c[t].headerList[d].key,i.value=c[t].headerList[d].value,a.appendChild(l),a.appendChild(document.createTextNode(" ")),a.appendChild(i),a.appendChild(document.createTextNode(" ")),a.appendChild(o),r.appendChild(a)}}}}function a(){if(confirm("Are you sure you want to delete this entry?")){var e;for(e=0;e<c.length;e++)if(c[e].name==this.nextSibling.innerHTML){c.splice(e,1);break}localStorage.removeItem("savedList"),localStorage.setItem("savedList",JSON.stringify(c));for(var t=this.parentNode.parentNode.firstChild;null!=t;){if(this.nextSibling.innerHTML==t.firstChild.nextSibling.innerHTML){this.parentNode.parentNode.removeChild(t);break}t=t.nextSibling}}}function l(){if(confirm("Are you sure you want to clear this form?")){document.getElementById("reqType").selectedIndex=0,document.getElementById("url").value="";var e=document.getElementById("body");e.value="",e.setAttribute("disabled","disabled"),document.getElementById("request-view").innerHTML="N/A",document.getElementById("response-view").innerHTML="N/A";for(var t=0;t<p.options.length;t++)p.options[t].removeAttribute("disabled");for(var n=document.getElementById("headers-list");n.hasChildNodes();)n.removeChild(n.firstChild)}}function o(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null}function u(){var e,t,n,d,r=m.options[m.selectedIndex].text,a=document.getElementById("url").value,l=document.getElementById("headers-list");if(a.replace("http:","https:"),d=o(),null!==d){for(d.open(r,a,!0),i=0;i<l.children.length;i++)t=l.children[i].children[0].value.replace(/^\s+|\s+$/g,""),""!==t&&void 0!==t&&null!==t&&(n=l.children[i].children[1].value,d.setRequestHeader(t,n));if("GET"!==r)try{var u=JSON.parse(document.getElementById("body").value);e=JSON.stringify(u,void 0,4)}catch(c){return void alert('[ERROR] Malformed JSON body! Please fix!\n\nMake sure your payload follows these rules:\n{\n  "attribute" : "string",\n  "attribute" : number,\n  "attribute" : [array],\n  "attribute" : {object}\n}')}else e=null;"POST"===r&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){s(d,r,e)},null===e?d.send():d.send(JSON.stringify(e))}}function s(e,t,n){if(4===e.readyState)if(200===e.status){var d=document.getElementById("request-view"),r=document.getElementById("response-view"),a=e.getAllResponseHeaders().replace(/<([^>]*)>/g,"&lt;$1&gt;");if(a=a.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"),d.innerHTML="HEADERS:\n\n",d.innerHTML+=JSON.stringify(JSON.parse(e.responseText).headers,void 0,4),r.innerHTML="HEADERS:\n\n",r.innerHTML+=JSON.stringify(a,void 0,4),r.innerHTML+="\n\nPAYLOAD:\n\n",r.innerHTML+=JSON.stringify(JSON.parse(e.responseText),void 0,4),"GET"!==t){var n=JSON.parse(e.responseText).form;d.innerHTML+="\n\nPAYLOAD:\n\n",d.innerHTML+=JSON.stringify(n,void 0,4)}}else alert("[ERROR] There was a problem sending the request. Please make it work and try again :)")}var c=JSON.parse(localStorage.getItem("savedList"));(null==c||""==c)&&(c=new Array,localStorage.setItem("savedList",JSON.stringify(c)));var m=document.getElementById("reqType"),p=document.getElementById("header-select"),h=document.getElementById("addCustom"),v=document.getElementById("body");if(document.getElementById("save").addEventListener("click",d),document.getElementById("clear").addEventListener("click",l),document.getElementById("send").addEventListener("click",u),null!=c)for(var y,g,E,f,b,N,T,I=document.getElementById("need-children"),C=0;C<c.length;C+=1)y=document.createElement("div"),g=document.createElement("span"),E=document.createTextNode("X"),f=document.createElement("div"),b=document.createTextNode(c[C].name),N=document.createElement("span"),T=document.createTextNode(c[C].url),y.className="pure-u-1 saved-list-item",g.className="pure-u-1-10 delete",f.className="pure-u-22-24 label",N.className="pure-u-1 site",g.appendChild(E),f.appendChild(b),N.appendChild(T),y.appendChild(g),y.appendChild(f),y.appendChild(N),null!=I&&I.appendChild(y),f.addEventListener("click",r),g.addEventListener("click",a);m.onchange=function(){var e=m.options[m.selectedIndex];"GET"===e.text?v.setAttribute("disabled","disabled"):v.removeAttribute("disabled")},p.onchange=function(){var e,d=p.options[p.selectedIndex],r=document.getElementById("headers-list");switch(d.value){case"Accept-Language":e="en-US";break;case"Connection":e="Keep-Alive";break;case"Content-Type":e="text/html";break;case"User-Agent":e=null;break;case"Timeout":e="5000";break;default:e=""}var a=document.createElement("LI");a.className="pure-u-1 headers-list-item";var l=document.createElement("input");l.type="text",l.className="pure-u-3-8",l.value=d.value,l.addEventListener("keydown",n);var i=document.createElement("input");i.type="text",i.className="pure-u-3-8",i.addEventListener("keydown",n);var o=document.createElement("button");if(o.className="pure-button button-error pure-u-1-8 remove-std-header",o.innerHTML="X",o.addEventListener("click",t),null===e){var u=window.navigator.userAgent;i.value=u}else i.placeholder=e;a.appendChild(l),a.appendChild(document.createTextNode(" ")),a.appendChild(i),a.appendChild(document.createTextNode(" ")),a.appendChild(o),r.appendChild(a),d.setAttribute("disabled","disabled"),p.selectedIndex=0},h.onclick=function(){var t=(document.getElementById("headers-list"),document.getElementById("headers-list")),d=document.createElement("LI");d.className="pure-u-1 headers-list-item";var r=document.createElement("input");r.type="text",r.className="pure-u-3-8",r.placeholder="key",r.addEventListener("keydown",n);var a=document.createElement("input");a.type="text",a.className="pure-u-3-8",a.placeholder="value",a.addEventListener("keydown",n);var l=document.createElement("button");l.className="pure-button button-error pure-u-1-8 remove-header",l.innerHTML="X",l.addEventListener("click",e),d.appendChild(r),d.appendChild(document.createTextNode(" ")),d.appendChild(a),d.appendChild(document.createTextNode(" ")),d.appendChild(l),t.appendChild(d)}};
